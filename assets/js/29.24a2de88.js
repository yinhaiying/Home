(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{292:function(t,i,o){"use strict";o.r(i);var a=o(28),n=Object(a.a)({},(function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("section",{staticStyle:{"font-size":"16px",color:"black",padding:"0 10px","line-height":"1.6","word-spacing":"0px","letter-spacing":"0px","word-break":"break-word","word-wrap":"break-word","text-align":"left","font-family":"Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif","margin-top":"-10px"},attrs:{id:"nice","data-tool":"mdnice编辑器","data-website":"https://www.mdnice.com"}},[o("h1",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"24px"},attrs:{"data-tool":"mdnice编辑器"}},[o("span",{staticClass:"prefix",staticStyle:{display:"none"}}),o("span",{staticClass:"content"},[t._v("Cookie和Session")]),o("span",{staticClass:"suffix"})]),t._v(" "),o("h2",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","border-bottom":"2px solid rgb(239, 112, 96)","font-size":"1.3em"},attrs:{"data-tool":"mdnice编辑器"}},[o("span",{staticClass:"prefix",staticStyle:{display:"none"}}),o("span",{staticClass:"content",staticStyle:{display:"inline-block","font-weight":"bold",background:"rgb(239, 112, 96)",color:"#ffffff",padding:"3px 10px 1px","border-top-right-radius":"3px","border-top-left-radius":"3px","margin-right":"3px"}},[t._v("Cookie")]),o("span",{staticClass:"suffix"}),o("span",{staticStyle:{display:"inline-block","vertical-align":"bottom","border-bottom":"36px solid #efebe9","border-right":"20px solid transparent"}})]),t._v(" "),o("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("HTTP是一种不保存状态的协议，也就是"),o("strong",{staticStyle:{"font-weight":"bold",color:"black"}},[t._v("无状态协议")]),t._v("。Http自身不对请求和响应之间的通信状态做出保存，也就是说在在HTTP这个级别，协议对于发送过的请求和响应都不做出保存。")]),t._v(" "),o("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("事实上：由于通常一台服务器会服务于几万个甚至更多的客户(客户端)，如果把所有的客户端信息都记录下来，那么会大大增加服务器的压力，HTTP协议是无状态的，也就意味着服务器没法记住某个客户发出的请求和做出的响应，这样的话客户下一次再次请求时，服务器也无法识别这个客户，因此又会做出新的响应。比如登录时，客户明明已经登录过了，但是跳转到网站的其他页面，由于是服务器是无状态的服务器还得请求一次。为了实现期望的保持状态功能，于是引入了"),o("strong",{staticStyle:{"font-weight":"bold",color:"black"}},[t._v("cookie")]),t._v("技术。")]),t._v(" "),o("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("Cookie是保存在客户端的小段文本,随着客户端每一个请求发送该url下的所有cookies到服务器端。")]),t._v(" "),o("figure",{staticStyle:{margin:"0","margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[o("img",{staticStyle:{display:"block",margin:"0 auto","max-width":"100%"},attrs:{src:"https://i.loli.net/2019/12/06/vMRVJAy5Z1anHCz.png",alt:"cookies_1.png"}}),o("figcaption",{staticStyle:{"margin-top":"5px","text-align":"center",color:"#888","font-size":"14px"}},[t._v("cookies_1.png")])]),t._v(" "),o("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("Cookie的详细工作流程如下："),o("img",{staticStyle:{display:"block",margin:"0 auto","max-width":"100%"},attrs:{src:"https://i.loli.net/2019/12/06/pzT4kJLWvVgwijF.png",alt:"cookie_0.png"}})]),t._v(" "),o("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("1、第一次请求时，浏览器中是没有cookie信息的。")]),t._v(" "),o("figure",{staticStyle:{margin:"0","margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[o("img",{staticStyle:{display:"block",margin:"0 auto","max-width":"100%"},attrs:{src:"https://i.loli.net/2019/12/06/oBZWCbn9tHLur7d.png",alt:"cookies_2.png"}}),o("figcaption",{staticStyle:{"margin-top":"5px","text-align":"center",color:"#888","font-size":"14px"}},[t._v("cookies_2.png")])]),t._v(" "),o("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("2、服务器接收到请求后，会首先检查是否存在Cookie，如果没有Cookie,会生成一个Cookie。在响应头中Set-Cookie中生成Cookie信息。生成的Cookie文本中，存在一个sessionId，服务器会记录下来这个sessionId。")]),t._v(" "),o("figure",{staticStyle:{margin:"0","margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[o("img",{staticStyle:{display:"block",margin:"0 auto","max-width":"100%"},attrs:{src:"https://i.loli.net/2019/12/06/2wmEaSPXeBgoDcR.png",alt:"cookies_3png.png"}}),o("figcaption",{staticStyle:{"margin-top":"5px","text-align":"center",color:"#888","font-size":"14px"}},[t._v("cookies_3png.png")])]),t._v(" "),o("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("3、客户端再次请求时，浏览器会自动将Cookie信息添加到请求头上，服务器接到请求会根据sessionId来判断身份。")]),t._v(" "),o("figure",{staticStyle:{margin:"0","margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[o("img",{staticStyle:{display:"block",margin:"0 auto","max-width":"100%"},attrs:{src:"https://i.loli.net/2019/12/06/y8TrRQwjLkG3XdV.png",alt:"cookies_4png.png"}}),o("figcaption",{staticStyle:{"margin-top":"5px","text-align":"center",color:"#888","font-size":"14px"}},[t._v("cookies_4png.png")])]),t._v(" "),o("h2",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","border-bottom":"2px solid rgb(239, 112, 96)","font-size":"1.3em"},attrs:{"data-tool":"mdnice编辑器"}},[o("span",{staticClass:"prefix",staticStyle:{display:"none"}}),o("span",{staticClass:"content",staticStyle:{display:"inline-block","font-weight":"bold",background:"rgb(239, 112, 96)",color:"#ffffff",padding:"3px 10px 1px","border-top-right-radius":"3px","border-top-left-radius":"3px","margin-right":"3px"}},[t._v("Session")]),o("span",{staticClass:"suffix"}),o("span",{staticStyle:{display:"inline-block","vertical-align":"bottom","border-bottom":"36px solid #efebe9","border-right":"20px solid transparent"}})]),t._v(" "),o("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("Session保存在服务器端(在服务器端生成)，通过唯一的sessionId来区别每一个用户。sessionId随每个请求发送到服务器(sessionId实际上是Cookie中的一个字段)，Session实际上是一个保存在服务器的数据表，每一个sessionId对应一个用户。通过Cookie获取到SessionId，然后再通过session的key获取session值。")]),t._v(" "),o("figure",{staticStyle:{margin:"0","margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[o("img",{staticStyle:{display:"block",margin:"0 auto","max-width":"100%"},attrs:{src:"https://i.loli.net/2019/12/06/bxucSfzRLAlFZ2O.png",alt:"session_id.png"}}),o("figcaption",{staticStyle:{"margin-top":"5px","text-align":"center",color:"#888","font-size":"14px"}},[t._v("session_id.png")])]),t._v(" "),o("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[o("strong",{staticStyle:{"font-weight":"bold",color:"black"}},[t._v("思考：如果不使用Cookie能不能实现维持会话？")])]),t._v(" "),o("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("仔细分析Cookie的功能，我们使用Cookie最重要的就是保存了一个sessionId然后每次请求时，在请求头中携带过去。如果没有了Cookie,那么我们可以不可以通过其他的手段把这个sessionId发送到服务端，并通过其他手段再吉首这个sessionId。比如我们可以通过在Url后面添加上sessionId，这样的话服务器端也能获取到sessionId，然后 服务端再将sessionId返回回来，客户端再进行保存。这样的话也能够实现类似于Cookie的功能，但是这样不太安全，因为sessionId直接在Url后面是可见的，很容易就被模仿了。也存在一个方法提高安全性，那就是服务器产生一个tooken，每请求一次tooken发生变化，tooken只能使用一次，这样也能提高安全性。")]),t._v(" "),o("p",{staticClass:"nice-suffix-juejin-container",staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black","margin-top":"20px !important"},attrs:{id:"nice-suffix-juejin-container","data-tool":"mdnice编辑器"}},[t._v("本文使用 "),o("a",{staticStyle:{"text-decoration":"none","word-wrap":"break-word","font-weight":"bold",color:"rgb(239, 112, 96)","border-bottom":"1px solid rgb(239, 112, 96)"},attrs:{href:"https://mdnice.com"}},[t._v("mdnice")]),t._v(" 排版")])])])}),[],!1,null,null,null);i.default=n.exports}}]);