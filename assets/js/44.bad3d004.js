(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{272:function(t,a,s){"use strict";s.r(a);var o=s(28),i=Object(o.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("section",{staticStyle:{"font-size":"16px",color:"black",padding:"0 10px","line-height":"1.6","word-spacing":"0px","letter-spacing":"0px","word-break":"break-word","word-wrap":"break-word","text-align":"left","font-family":"Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif","margin-top":"-10px"},attrs:{id:"nice","data-tool":"mdnice编辑器","data-website":"https://www.mdnice.com"}},[s("h1",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"24px"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content"},[t._v("仿vue-cli搭建属于自己的命令行工具")]),s("span",{staticClass:"suffix"})]),t._v(" "),s("h2",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","border-bottom":"2px solid rgb(239, 112, 96)","font-size":"1.3em"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content",staticStyle:{display:"inline-block","font-weight":"bold",background:"rgb(239, 112, 96)",color:"#ffffff",padding:"3px 10px 1px","border-top-right-radius":"3px","border-top-left-radius":"3px","margin-right":"3px"}},[t._v("前言")]),s("span",{staticClass:"suffix"}),s("span",{staticStyle:{display:"inline-block","vertical-align":"bottom","border-bottom":"36px solid #efebe9","border-right":"20px solid transparent"}})]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("使用过@vue/cli的同学都知道，通过npm install -g @vue/cli全局安装之后，然后通过vue create my-project命令就可以安装项目了而且，在安装的过程中，命令行中有各种交互，比如选择什么预处理器，选择什么测试工具。这些强大的功能都令人羡慕，果然不愧是大佬开发的工具。但是随着前端知识的深入，我们越来越不满足于只是简单地使用这个工具，而是想要了解清楚为什么能够实现这么强大的命令行交互功能。这篇文章就是仿照vue-cli搭建一个属于自己的命令行工具。我们实现的是一个支持在命令行中增删改查的命令行工具。")]),t._v(" "),s("h2",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","border-bottom":"2px solid rgb(239, 112, 96)","font-size":"1.3em"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content",staticStyle:{display:"inline-block","font-weight":"bold",background:"rgb(239, 112, 96)",color:"#ffffff",padding:"3px 10px 1px","border-top-right-radius":"3px","border-top-left-radius":"3px","margin-right":"3px"}},[t._v("命令行工具必备包")]),s("span",{staticClass:"suffix"}),s("span",{staticStyle:{display:"inline-block","vertical-align":"bottom","border-bottom":"36px solid #efebe9","border-right":"20px solid transparent"}})]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[s("strong",{staticStyle:{"font-weight":"bold",color:"black"}},[t._v("commander")]),t._v(":编写指令和处理命令行参数的包。\n我们在使用vue create project这个命令创建项目时，有没有想过为什么这个命令能够实现创建项目的功能，commander包就是用来定义这些命令的。")]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[t._v("# 定义查看版本的命令\n"),s("span"),t._v("program\n"),s("span"),t._v("  .version("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'1.0.0'")]),t._v(")\n"),s("span"),t._v("  .description("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'自定义命令行工具'")]),t._v(")\n"),s("span"),t._v("# 定义添加的命令\n"),s("span"),t._v("program\n"),s("span"),t._v("  .command("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'add'")]),t._v(")\n"),s("span"),t._v("  .alias("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'a'")]),t._v(")\n"),s("span"),t._v("  .description("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'添加新用户'")]),t._v(")\n"),s("span"),t._v("  .action("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("()")]),t._v(" =>")]),t._v(" {\n"),s("span"),t._v("    inquirer.prompt(addQuery).then("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("answers")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("      addCustomer(answers)\n"),s("span"),t._v("    })\n"),s("span"),t._v("  })\n"),s("span")])]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("通过commander进行定义我们就可以使用类似于xx --version 来查看版本以及xxx add来实现类似于vue create project这样的功能。"),s("br"),t._v(" "),s("strong",{staticStyle:{"font-weight":"bold",color:"black"}},[t._v("inquirer")]),t._v(":命令行交互的工具。\n在使用vue/cli创建项目的过程中，我们经常会看到类似于选择什么css预处理器，选择什么测试方法啊这种命令行中的询问，但是实际上我们平常使用命令行时都是直接输入命令，很少使用这种命令行交互的。而inquirer就是node环境下提供的一种命令行交互工具。")]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[t._v("inquirer\n"),s("span"),t._v("  .prompt([\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-comment",staticStyle:{color:"#57A64A","font-style":"italic","line-height":"26px"}},[t._v("// 命令行中交互式问题")]),t._v("\n"),s("span"),t._v("  ])\n"),s("span"),t._v("  .then("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("answers")]),t._v(" =>")]),t._v(" {\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-comment",staticStyle:{color:"#57A64A","font-style":"italic","line-height":"26px"}},[t._v("// answers 命令行中用户输入的答案")]),t._v("\n"),s("span"),t._v("  });\n"),s("span")])]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("其他还有一些用户命令行美化的工具，比如："),s("br"),t._v(" "),s("strong",{staticStyle:{"font-weight":"bold",color:"black"}},[t._v("chalk")]),t._v(":给命令行文字添加颜色"),s("br"),t._v(" "),s("strong",{staticStyle:{"font-weight":"bold",color:"black"}},[t._v("ora")]),t._v(":命令行中添加进度条"),s("br"),t._v("\n好了，到目前为止，我们了解了开发命令行工具常见的包，接下来进入正式的开发。")]),t._v(" "),s("h2",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","border-bottom":"2px solid rgb(239, 112, 96)","font-size":"1.3em"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content",staticStyle:{display:"inline-block","font-weight":"bold",background:"rgb(239, 112, 96)",color:"#ffffff",padding:"3px 10px 1px","border-top-right-radius":"3px","border-top-left-radius":"3px","margin-right":"3px"}},[t._v("实现数据库的增删改查")]),s("span",{staticClass:"suffix"}),s("span",{staticStyle:{display:"inline-block","vertical-align":"bottom","border-bottom":"36px solid #efebe9","border-right":"20px solid transparent"}})]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("在本文中我们使用的mongodb数据库，Schema和Model的定义以及数据数据库的连接就不一一展示了，我们这里展示数据库的增删改查实现。因为这些实现实际上就是命令行命令对应的实现。")]),t._v(" "),s("h3",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"20px"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content"},[t._v("添加用户")]),s("span",{staticClass:"suffix",staticStyle:{display:"none"}})]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[s("span",{staticClass:"hljs-keyword",staticStyle:{color:"#569CD6","line-height":"26px"}},[t._v("const")]),t._v(" addCustomer = "),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("customer")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("  Customer.create(customer).then("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("data")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("console")]),t._v(".info("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'新用户已添加...'")]),t._v(");\n"),s("span"),t._v("    mongoose.connection.close();\n"),s("span"),t._v("  })\n"),s("span"),t._v("}\n"),s("span")])]),t._v(" "),s("h3",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"20px"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content"},[t._v("查找用户")]),s("span",{staticClass:"suffix",staticStyle:{display:"none"}})]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[s("span",{staticClass:"hljs-keyword",staticStyle:{color:"#569CD6","line-height":"26px"}},[t._v("const")]),t._v(" findCustomer = "),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("name")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("  "),s("span",{staticClass:"hljs-comment",staticStyle:{color:"#57A64A","font-style":"italic","line-height":"26px"}},[t._v("//不区分大小写")]),t._v("\n"),s("span"),t._v("  "),s("span",{staticClass:"hljs-keyword",staticStyle:{color:"#569CD6","line-height":"26px"}},[t._v("const")]),t._v(" search = "),s("span",{staticClass:"hljs-keyword",staticStyle:{color:"#569CD6","line-height":"26px"}},[t._v("new")]),t._v(" "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("RegExp")]),t._v("(name,"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'i'")]),t._v(");\n"),s("span"),t._v("  Customer.find({\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("$or")]),t._v(":[{"),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("firstname")]),t._v(":search},{"),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("lastname")]),t._v(":search}]\n"),s("span"),t._v("  }).then("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("customer")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("console")]),t._v(".info(customer);\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("console")]),t._v(".info("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("`"),s("span",{staticClass:"hljs-subst",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("${customer.length}")]),t._v("个匹配`")]),t._v(");\n"),s("span"),t._v("    mongoose.connection.close();\n"),s("span"),t._v("  })\n"),s("span"),t._v("}\n"),s("span")])]),t._v(" "),s("h3",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"20px"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content"},[t._v("更新用户")]),s("span",{staticClass:"suffix",staticStyle:{display:"none"}})]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[s("span",{staticClass:"hljs-keyword",staticStyle:{color:"#569CD6","line-height":"26px"}},[t._v("const")]),t._v(" updateCustomer = "),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("_id,customer")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("  Customer.update({_id},customer).then("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("customer")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("console")]),t._v(".info("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'用户信息已经更新'")]),t._v(");\n"),s("span"),t._v("    mongoose.connection.close();\n"),s("span"),t._v("  })\n"),s("span"),t._v("}\n"),s("span")])]),t._v(" "),s("h3",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"20px"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content"},[t._v("删除用户")]),s("span",{staticClass:"suffix",staticStyle:{display:"none"}})]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[s("span",{staticClass:"hljs-keyword",staticStyle:{color:"#569CD6","line-height":"26px"}},[t._v("const")]),t._v(" removeCustomer = "),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("_id")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("  Customer.remove({_id}).then("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("customer")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("console")]),t._v(".info("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'用户信息已经删除'")]),t._v(");\n"),s("span"),t._v("    mongoose.connection.close();\n"),s("span"),t._v("  })\n"),s("span"),t._v("}\n"),s("span")])]),t._v(" "),s("h3",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"20px"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content"},[t._v("用户列表")]),s("span",{staticClass:"suffix",staticStyle:{display:"none"}})]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[s("span",{staticClass:"hljs-keyword",staticStyle:{color:"#569CD6","line-height":"26px"}},[t._v("const")]),t._v(" listCustomer = "),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("()")]),t._v(" =>")]),t._v(" {\n"),s("span"),t._v("  Customer.find().then("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("customer")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("console")]),t._v(".info(customer);\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("console")]),t._v(".info("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("`"),s("span",{staticClass:"hljs-subst",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("${customer.length}")]),t._v("个用户`")]),t._v(");\n"),s("span"),t._v("    mongoose.connection.close();\n"),s("span"),t._v("  })\n"),s("span"),t._v("}\n"),s("span")])]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("上面我们定义了数据库的增删改查功能，接下来我们把这些功能通过命令行的指令来实现")]),t._v(" "),s("h2",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","border-bottom":"2px solid rgb(239, 112, 96)","font-size":"1.3em"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content",staticStyle:{display:"inline-block","font-weight":"bold",background:"rgb(239, 112, 96)",color:"#ffffff",padding:"3px 10px 1px","border-top-right-radius":"3px","border-top-left-radius":"3px","margin-right":"3px"}},[t._v("编写具体指令")]),s("span",{staticClass:"suffix"}),s("span",{staticStyle:{display:"inline-block","vertical-align":"bottom","border-bottom":"36px solid #efebe9","border-right":"20px solid transparent"}})]),t._v(" "),s("h3",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"20px"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content"},[t._v("编写添加指令")]),s("span",{staticClass:"suffix",staticStyle:{display:"none"}})]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[s("span",{staticClass:"hljs-keyword",staticStyle:{color:"#569CD6","line-height":"26px"}},[t._v("const")]),t._v(" program = "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("require")]),t._v("("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'commander'")]),t._v(");\n"),s("span"),s("span",{staticClass:"hljs-keyword",staticStyle:{color:"#569CD6","line-height":"26px"}},[t._v("const")]),t._v(" inquirer = "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("require")]),t._v("("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'inquirer'")]),t._v(");\n"),s("span"),s("span",{staticClass:"hljs-comment",staticStyle:{color:"#57A64A","font-style":"italic","line-height":"26px"}},[t._v("// 定义命令行询问的问题：")]),t._v("\n"),s("span"),s("span",{staticClass:"hljs-keyword",staticStyle:{color:"#569CD6","line-height":"26px"}},[t._v("const")]),t._v(" addQuery = [\n"),s("span"),t._v("  {\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("type")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'input'")]),t._v(",\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("name")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'firstname'")]),t._v(",\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("message")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'请输入firstname'")]),t._v("\n"),s("span"),t._v("  },\n"),s("span"),t._v("  {\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("type")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'input'")]),t._v(",\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("name")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'lastname'")]),t._v(",\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("message")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'请输入lastname'")]),t._v("\n"),s("span"),t._v("  },\n"),s("span"),t._v("  {\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("type")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'input'")]),t._v(",\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("name")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'phone'")]),t._v(",\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("message")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'请输入phone'")]),t._v("\n"),s("span"),t._v("  },\n"),s("span"),t._v("  {\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("type")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'input'")]),t._v(",\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("name")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'email'")]),t._v(",\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-attr",staticStyle:{color:"#9CDCFE","line-height":"26px"}},[t._v("message")]),t._v(":"),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'请输入email'")]),t._v("\n"),s("span"),t._v("  },\n"),s("span"),t._v("]\n"),s("span"),s("span",{staticClass:"hljs-comment",staticStyle:{color:"#57A64A","font-style":"italic","line-height":"26px"}},[t._v("// 添加指令的实现")]),t._v("\n"),s("span"),t._v("program\n"),s("span"),t._v("  .command("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'add'")]),t._v(")\n"),s("span"),t._v("  .alias("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'a'")]),t._v(")\n"),s("span"),t._v("  .description("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'添加新用户'")]),t._v(")\n"),s("span"),t._v("  .action("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("()")]),t._v(" =>")]),t._v(" {\n"),s("span"),t._v("    inquirer.prompt(addQuery).then("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("answers")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("      addCustomer(answers)\n"),s("span"),t._v("    })\n"),s("span"),t._v("  })\n"),s("span"),t._v("  "),s("span",{staticClass:"hljs-comment",staticStyle:{color:"#57A64A","font-style":"italic","line-height":"26px"}},[t._v("// 解析命令行参数，必须有")]),t._v("\n"),s("span"),t._v("program.parse(process.argv);\n"),s("span")])]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("从上面的代码中，我们可以看出我们主要使用了commander和inquirer这两个包，通过使用command定义具体指令，其中：\n.command('add'):是定义add指令。这样的话可以在命令行中直接运行 node command.js add\n.alias('a'):是定义add的简写，可以直接使用node command.js a来实现\n.description:是描述指令的功能，在help()时提示用户\n.action():是定义指令的具体执行内容。也是最关键的部分。"),s("br")]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("如果我们我们想在命令行中提供交互，就可以在action的回调函数中使用inquirer进行询问。具体的询问内容通过一个数组提供,数组元素的内容可以在"),s("a",{staticStyle:{"text-decoration":"none","word-wrap":"break-word","font-weight":"bold",color:"rgb(239, 112, 96)","border-bottom":"1px solid rgb(239, 112, 96)"},attrs:{href:"https://www.npmjs.com/package/inquirer"}},[t._v("inquirer")]),t._v("进行查看。这样的话，我们就可以通过使用node command.js add(备注：command.js是我编写命令的文件)来运行了。而且我们也可以在命令行中看到各种命令行交互。这样的话，我们初步实现了命令行工具的功能。接下来我们继续实现查找，修改，删除用户命令。")]),t._v(" "),s("h3",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"20px"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content"},[t._v("编写查找用户指令")]),s("span",{staticClass:"suffix",staticStyle:{display:"none"}})]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("查找用户的指令和添加用户指令的编写方式类似，只不过查找时不需要进行询问了。")]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[t._v("program\n"),s("span"),t._v("  .command("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'find <name>'")]),t._v(")\n"),s("span"),t._v("  .alias("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'f'")]),t._v(")\n"),s("span"),t._v("  .description("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'查找用户'")]),t._v(")\n"),s("span"),t._v("  .action("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("name")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("    findCustomer(name)\n"),s("span"),t._v("  })\n"),s("span")])]),t._v(" "),s("h3",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"20px"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content"},[t._v("编写删除用户指令")]),s("span",{staticClass:"suffix",staticStyle:{display:"none"}})]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[t._v("program\n"),s("span"),t._v("  .command("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'remove <_id>'")]),t._v(")\n"),s("span"),t._v("  .alias("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'r'")]),t._v(")\n"),s("span"),t._v("  .description("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'删除用户'")]),t._v(")\n"),s("span"),t._v("  .action("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("_id")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("    removeCustomer(_id);\n"),s("span"),t._v("  })\n"),s("span")])]),t._v(" "),s("h3",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"20px"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content"},[t._v("编写更新用户指令")]),s("span",{staticClass:"suffix",staticStyle:{display:"none"}})]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[t._v("program\n"),s("span"),t._v("  .command("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'update <_id>'")]),t._v(")\n"),s("span"),t._v("  .alias("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'u'")]),t._v(")\n"),s("span"),t._v("  .description("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'更新用户'")]),t._v(")\n"),s("span"),t._v("  .action("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("_id")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("    inquirer.prompt(addQuery).then("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("("),s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("answers")]),t._v(") =>")]),t._v(" {\n"),s("span"),t._v("      "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("console")]),t._v(".log(_id);\n"),s("span"),t._v("      updateCustomer(_id,answers)\n"),s("span"),t._v("    })\n"),s("span"),t._v("  })\n"),s("span")])]),t._v(" "),s("h3",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","font-size":"20px"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content"},[t._v("编写获取所有用户列表指令")]),s("span",{staticClass:"suffix",staticStyle:{display:"none"}})]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[t._v("program\n"),s("span"),t._v(".command("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'list'")]),t._v(")\n"),s("span"),t._v(".alias("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'l'")]),t._v(")\n"),s("span"),t._v(".description("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'获取所有用户'")]),t._v(")\n"),s("span"),t._v(".action("),s("span",{staticClass:"hljs-function",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[s("span",{staticClass:"hljs-params",staticStyle:{color:"#DCDCDC","line-height":"26px"}},[t._v("()")]),t._v(" =>")]),t._v(" {\n"),s("span"),t._v("  listCustomer();\n"),s("span"),t._v("})\n"),s("span")])]),t._v(" "),s("h2",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","border-bottom":"2px solid rgb(239, 112, 96)","font-size":"1.3em"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content",staticStyle:{display:"inline-block","font-weight":"bold",background:"rgb(239, 112, 96)",color:"#ffffff",padding:"3px 10px 1px","border-top-right-radius":"3px","border-top-left-radius":"3px","margin-right":"3px"}},[t._v("bin和npm link简化命令执行")]),s("span",{staticClass:"suffix"}),s("span",{staticStyle:{display:"inline-block","vertical-align":"bottom","border-bottom":"36px solid #efebe9","border-right":"20px solid transparent"}})]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("上面我们定义了增啥改查指令，通过node command + add(或者find,remove等)可以实现命令的执行。但是我们每次运行时还是需要指定通过node来运行，而且需要指定运行的文件地址，但是实际上，我们在是哟个vue/cli时，只是直接通过vue命令就能够运行的，不需要node。因此，这里我们肯定可以优化命令的执行，而通过在package.json中定义bin目录，可以帮助我们实现这个功能。")]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[t._v("  "),s("span",{staticClass:"hljs-comment",staticStyle:{color:"#57A64A","font-style":"italic","line-height":"26px"}},[t._v("// bin用来指定每个文件所对应的可执行文件路径")]),t._v("\n"),s("span"),t._v("  "),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v('"bin"')]),t._v(": {\n"),s("span"),t._v("    "),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v('"command"')]),t._v(": "),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v('"bin/command.js"')]),t._v("(假设command.js在bin目录下)\n"),s("span"),t._v("  },\n"),s("span")])]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("上面代码指定："),s("code",{staticStyle:{"font-size":"14px","word-wrap":"break-word",padding:"2px 4px","border-radius":"4px",margin:"0 2px","background-color":"rgba(27,31,35,.05)","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","word-break":"break-all",color:"rgb(239, 112, 96)"}},[t._v("command")]),t._v("命令对应的可执行文件为"),s("code",{staticStyle:{"font-size":"14px","word-wrap":"break-word",padding:"2px 4px","border-radius":"4px",margin:"0 2px","background-color":"rgba(27,31,35,.05)","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","word-break":"break-all",color:"rgb(239, 112, 96)"}},[t._v("bin")]),t._v("子目录下的"),s("code",{staticStyle:{"font-size":"14px","word-wrap":"break-word",padding:"2px 4px","border-radius":"4px",margin:"0 2px","background-color":"rgba(27,31,35,.05)","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","word-break":"break-all",color:"rgb(239, 112, 96)"}},[t._v("command.js")]),t._v("。npm会寻找这个文件，在"),s("code",{staticStyle:{"font-size":"14px","word-wrap":"break-word",padding:"2px 4px","border-radius":"4px",margin:"0 2px","background-color":"rgba(27,31,35,.05)","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","word-break":"break-all",color:"rgb(239, 112, 96)"}},[t._v("node_modules/.bin")]),t._v("目录下建立链接。在上面的例子中，"),s("code",{staticStyle:{"font-size":"14px","word-wrap":"break-word",padding:"2px 4px","border-radius":"4px",margin:"0 2px","background-color":"rgba(27,31,35,.05)","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","word-break":"break-all",color:"rgb(239, 112, 96)"}},[t._v("command.js")]),t._v("会建立符号链接"),s("code",{staticStyle:{"font-size":"14px","word-wrap":"break-word",padding:"2px 4px","border-radius":"4px",margin:"0 2px","background-color":"rgba(27,31,35,.05)","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","word-break":"break-all",color:"rgb(239, 112, 96)"}},[t._v("npm_modules/.bin/command.js")]),t._v("。由于"),s("code",{staticStyle:{"font-size":"14px","word-wrap":"break-word",padding:"2px 4px","border-radius":"4px",margin:"0 2px","background-color":"rgba(27,31,35,.05)","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","word-break":"break-all",color:"rgb(239, 112, 96)"}},[t._v("node_modules/.bin/")]),t._v("目录会在运行时加入系统的"),s("code",{staticStyle:{"font-size":"14px","word-wrap":"break-word",padding:"2px 4px","border-radius":"4px",margin:"0 2px","background-color":"rgba(27,31,35,.05)","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","word-break":"break-all",color:"rgb(239, 112, 96)"}},[t._v("PATH")]),t._v("变量，因此运行npm命令时，就可以不带路径，直接通过命令来调用这些脚本。\n然后，通过在根目录执行"),s("code",{staticStyle:{"font-size":"14px","word-wrap":"break-word",padding:"2px 4px","border-radius":"4px",margin:"0 2px","background-color":"rgba(27,31,35,.05)","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","word-break":"break-all",color:"rgb(239, 112, 96)"}},[t._v("npm link")]),t._v("(把命令挂载到全局)，这样我们每次只需要输入"),s("code",{staticStyle:{"font-size":"14px","word-wrap":"break-word",padding:"2px 4px","border-radius":"4px",margin:"0 2px","background-color":"rgba(27,31,35,.05)","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","word-break":"break-all",color:"rgb(239, 112, 96)"}},[t._v("command")]),t._v("，就相当于执行"),s("code",{staticStyle:{"font-size":"14px","word-wrap":"break-word",padding:"2px 4px","border-radius":"4px",margin:"0 2px","background-color":"rgba(27,31,35,.05)","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","word-break":"break-all",color:"rgb(239, 112, 96)"}},[t._v("node bin/command.js")]),t._v("。"),s("br"),t._v("\n注意：")]),t._v(" "),s("ol",{staticStyle:{"margin-top":"8px","margin-bottom":"8px","padding-left":"25px",color:"black","list-style-type":"decimal"},attrs:{"data-tool":"mdnice编辑器"}},[s("li",[s("section",{staticStyle:{"margin-top":"5px","margin-bottom":"5px","line-height":"26px","text-align":"left",color:"rgb(1,1,1)","font-weight":"500"}},[t._v("使用npm link时可能出现报错，如果有报错先使用npm unlink解绑，解绑完成之后在运行npm link 进行绑定。")])]),s("li",[s("section",{staticStyle:{"margin-top":"5px","margin-bottom":"5px","line-height":"26px","text-align":"left",color:"rgb(1,1,1)","font-weight":"500"}},[t._v("为了确保在不同环境中都能够通过node运行命令，我们需要在编写指令的开头添加以下语句。")])])]),t._v(" "),s("pre",{staticClass:"custom",staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{"data-tool":"mdnice编辑器"}},[s("code",{staticClass:"hljs",staticStyle:{"overflow-x":"auto",padding:"16px",background:"#1E1E1E",color:"#DCDCDC",display:"block","font-family":"Operator Mono, Consolas, Monaco, Menlo, monospace","border-radius":"0px","font-size":"12px","-webkit-overflow-scrolling":"touch"}},[s("span",{staticClass:"hljs-meta",staticStyle:{color:"#9B9B9B","line-height":"26px"}},[t._v("#!/usr/bin/env node     // 必须添加这行代码")]),t._v("\n"),s("span"),s("span",{staticClass:"hljs-keyword",staticStyle:{color:"#569CD6","line-height":"26px"}},[t._v("const")]),t._v(" program = "),s("span",{staticClass:"hljs-built_in",staticStyle:{color:"#4EC9B0","line-height":"26px"}},[t._v("require")]),t._v("("),s("span",{staticClass:"hljs-string",staticStyle:{color:"#D69D85","line-height":"26px"}},[t._v("'commander'")]),t._v(");\n"),s("span")])]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("接下来我们就可以通过command add这样直接运行命令了。一个简易的命令行工具实现数据库的增删改查就实现了。")]),t._v(" "),s("h2",{staticStyle:{"margin-top":"30px","margin-bottom":"15px",padding:"0px","font-weight":"bold",color:"black","border-bottom":"2px solid rgb(239, 112, 96)","font-size":"1.3em"},attrs:{"data-tool":"mdnice编辑器"}},[s("span",{staticClass:"prefix",staticStyle:{display:"none"}}),s("span",{staticClass:"content",staticStyle:{display:"inline-block","font-weight":"bold",background:"rgb(239, 112, 96)",color:"#ffffff",padding:"3px 10px 1px","border-top-right-radius":"3px","border-top-left-radius":"3px","margin-right":"3px"}},[t._v("总结")]),s("span",{staticClass:"suffix"}),s("span",{staticStyle:{display:"inline-block","vertical-align":"bottom","border-bottom":"36px solid #efebe9","border-right":"20px solid transparent"}})]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("到目前为止，一个简易的命令行工具就实现了，它具体的实现如下：")]),t._v(" "),s("ol",{staticStyle:{"margin-top":"8px","margin-bottom":"8px","padding-left":"25px",color:"black","list-style-type":"decimal"},attrs:{"data-tool":"mdnice编辑器"}},[s("li",[s("section",{staticStyle:{"margin-top":"5px","margin-bottom":"5px","line-height":"26px","text-align":"left",color:"rgb(1,1,1)","font-weight":"500"}},[t._v("通过commander定义命令")])]),s("li",[s("section",{staticStyle:{"margin-top":"5px","margin-bottom":"5px","line-height":"26px","text-align":"left",color:"rgb(1,1,1)","font-weight":"500"}},[t._v("通过inquirer提供命令行交互")])]),s("li",[s("section",{staticStyle:{"margin-top":"5px","margin-bottom":"5px","line-height":"26px","text-align":"left",color:"rgb(1,1,1)","font-weight":"500"}},[t._v("使用mongoose实现数据库的增删改查")])])]),t._v(" "),s("p",{staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black"},attrs:{"data-tool":"mdnice编辑器"}},[t._v("具备了一个cli工具的初步功能。这些都是一些简单的功能，但是帮助我们理解了命令行工具的具体实现，加深了理解。以后我们再次使用vue/cli脚手架时，每一步我们都可以想象一下它内部可能是怎么实现的，而不是只知道使用，不知道具体原理。"),s("br"),t._v("\n最后，完结撒花。")]),t._v(" "),s("p",{staticClass:"nice-suffix-juejin-container",staticStyle:{"font-size":"16px","padding-top":"8px","padding-bottom":"8px",margin:"0","line-height":"26px",color:"black","margin-top":"20px !important"},attrs:{id:"nice-suffix-juejin-container","data-tool":"mdnice编辑器"}},[t._v("本文使用 "),s("a",{staticStyle:{"text-decoration":"none","word-wrap":"break-word","font-weight":"bold",color:"rgb(239, 112, 96)","border-bottom":"1px solid rgb(239, 112, 96)"},attrs:{href:"https://mdnice.com"}},[t._v("mdnice")]),t._v(" 排版")])])])}),[],!1,null,null,null);a.default=i.exports}}]);