# transition


## css transition动画
1. 给需要设置动画的元素加上一个transition
2. 给transition 加上name属性，并设置相对应的css
3. 想要设置的动画效果，必须有初始值，然后对应的css中有新的值。
```css
.show-enter-active, .show-leave-active {
  transition: all 3s;
}
.show-enter, .show-leave-to  {
  opacity: 0;
  width:300px;
}
p{
  border:1px solid red;
  width:100px;  // 初始值
}
```

## 6个类名
**v-enter**:实际上就是动画的第一帧。
```css
p{
  border:1px solid red;
  width:100px;
  background:black;
}
.show-enter{
  background:red;
}
```

这里show-enter表示进入动画的第一帧元素背景是红色。
**v-enter-active**:表示进入动画的过程，用来描述动画的执行，比如执行多少秒，哪些属性执行，类似于CSS3中的
transition。这是每个动画都必须有的。
```css
.show-enter-active{
  transition: all 3s;
}
```
表示所有的属性进入动画后执行3s。

**v-enter-to**：定义进入动画过渡的结束状态，也就是进入动画的最后一帧。
```css
.show-enter-to{
  background:black;
}
```
一般是不需要设置v-enter-to。一般v-enter-to就是变成他的默认的样式。

这三个类的添加和移除顺序为：
第一帧：v-enter 和 v-enter-actiov
第二帧：v-enter被移除，添加v-enter-to类。这时候有v-enter-active和v-enter-to类。
最后动画过渡结束，移除v-enter和v-enter-to类。

注意这按个类只有在元素插入时才有，也就是在DOM结构中插入一个新的元素时才有。如果时从DOM结构中删除
元素并不会有这三个类。也就是说我们要理解动画的执行，并不是所有的动画都需要6个类，如果你只是想在
显示元素时假如动画，那么你只需要v-enter,v-enter-active,v-enter-to就可以了。


**v-leave**:动画离开时的第一帧，一般不需要设置，默认为当前的样式。
**v-leave-active:**：定义离开过渡动画的过程，用来描述动画的离开过程。通常也是用来设置过渡时间，延迟和曲线函数等。
```css
.show-leave-active {
  transition: all 10s;
}
```
**v-leave-to**：定义动画结束时的样式。也是过渡的最后一帧的状态。

总结：6个类，通常值需要设置4个。v-enter和v-enter-active(其中v-enter-to时元素的默认样式)。v-leave-active和v-leave-to(其中v-leave是元素的默认样式)。

## css animation动画
vue中animation动画的实现跟CSS3差不多。只不过这里是通过v-enter-active和v-leave-active来实现。
我们只需要确保两件事：
1. 定义v-enter-active和v-leave-active。不同于transition，我们不需要定义v-enter和v-leave-to这两个类。
2. 确保正常动画100%时元素处于正常状态(特殊设计的动画效果除外)。
```css
.bounce-enter-active {
  animation: bounce-in .5s;
}
.bounce-leave-active {
  animation: bounce-in .5s reverse;
}
/* 通过定义一个动画。然后直接设置动画的过程就可以了。 */
@keyframes bounce-in {
  0% {
    transform: scale(0);
  }
  50% {
    transform: scale(1.5);
  }
  100% {
    /* 一定要确保最后结束的状态是正常状态 */
    transform: scale(1);
  }
}
```
## 使用自定义类名配合第三方库来做动画
我们可以使用第三方库animate.css中的类来作为transition中的自定义类名，从而借助一些第三方库实现一些酷炫的动画效果。
```html
<div id="example-3">
  <button @click="show = !show">
    Toggle render
  </button>
  <transition
    enter-active-class="animated shake"
    leave-active-class="animated bounceOutRight"
  >
    <p v-if="show">hello</p>
  </transition>
</div>
```

## 多元素的过渡
由于多个元素的进入和离开的过渡同时生效，因此我们无法实现多个元素按照先后顺序进行过渡，比如先隐藏再显示。
因此，vue动画中提供了mode模式来设置控制多个元素的过渡。
```html
    <transition name = "fade" mode="out-in">
      <button key = "on" v-if = "status === 'off'" @click = "status='on'">on</button>
      <button key = "off" v-else @click = "status='off'" >off</button>
    </transition>
```
css如下：
```css
.fade-enter-active,.fade-leave-active{
  transition: all 1s;
}
.fade-enter{
  opacity:0;
  background:red;
}
.fade-leave-to{
  opacity:0;
  background:red;
}
```
mode="out-in"表示先执行离开的过渡，然后执行进入的过渡。
**注意：**
元素的过渡必须使用key来进行区分。
## 多组件的过渡切换
多组件的切换不需要使用key,可以通过使用component动态组件来实现。
```html
<transition name="component-fade" mode="out-in">
  <component v-bind:is="view"></component>
</transition>
```

## 列表的过渡
```html
<div id="list-demo" class="demo">
  <button v-on:click="add">Add</button>
  <button v-on:click="remove">Remove</button>
  <transition-group name="list" tag="p">
    <span v-for="item in items" v-bind:key="item" class="list-item">
      {{ item }}
    </span>
  </transition-group>
</div>
```
1. 必须使用transition-group标签。不同于 <transition>，它会以一个真实元素呈现：默认为一个 <span>。你也可以通过 tag attribute 更换为其他元素。
2. 循环的列表必须是transition-group的第一个子元素，中间不能有其他元素，否则无法生效。
3. 列表内部元素必须提供唯一的key值。
4. CSS 过渡的类将会应用在内部的元素中，而不是这个组/容器本身。css的过渡与之前的transition过渡写法相同。

