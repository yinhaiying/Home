<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>海鹰斯坦的个人主页</title>
    <meta name="description" content="海鹰斯坦的个人主页">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/Home/assets/css/0.styles.e94f337b.css" as="style"><link rel="preload" href="/Home/assets/js/app.4e9de29e.js" as="script"><link rel="preload" href="/Home/assets/js/2.852f0768.js" as="script"><link rel="preload" href="/Home/assets/js/34.76e04935.js" as="script"><link rel="prefetch" href="/Home/assets/js/10.8473db2b.js"><link rel="prefetch" href="/Home/assets/js/11.b4241947.js"><link rel="prefetch" href="/Home/assets/js/12.b09a44ea.js"><link rel="prefetch" href="/Home/assets/js/13.d63114f0.js"><link rel="prefetch" href="/Home/assets/js/14.0b8be25b.js"><link rel="prefetch" href="/Home/assets/js/15.bd62ea79.js"><link rel="prefetch" href="/Home/assets/js/16.cc1ee14d.js"><link rel="prefetch" href="/Home/assets/js/17.1ef904c7.js"><link rel="prefetch" href="/Home/assets/js/18.e0a82910.js"><link rel="prefetch" href="/Home/assets/js/19.38d174c3.js"><link rel="prefetch" href="/Home/assets/js/20.aa3ff896.js"><link rel="prefetch" href="/Home/assets/js/21.c79e05d9.js"><link rel="prefetch" href="/Home/assets/js/22.da13ae6a.js"><link rel="prefetch" href="/Home/assets/js/23.78c92169.js"><link rel="prefetch" href="/Home/assets/js/24.94b7a7ff.js"><link rel="prefetch" href="/Home/assets/js/25.5b167e5d.js"><link rel="prefetch" href="/Home/assets/js/26.d3807609.js"><link rel="prefetch" href="/Home/assets/js/27.50f8fd8e.js"><link rel="prefetch" href="/Home/assets/js/28.69c4d2e9.js"><link rel="prefetch" href="/Home/assets/js/29.24a2de88.js"><link rel="prefetch" href="/Home/assets/js/3.ab36bc1f.js"><link rel="prefetch" href="/Home/assets/js/30.2c780612.js"><link rel="prefetch" href="/Home/assets/js/31.a3bef37b.js"><link rel="prefetch" href="/Home/assets/js/32.c42a9904.js"><link rel="prefetch" href="/Home/assets/js/33.2fba6d41.js"><link rel="prefetch" href="/Home/assets/js/35.00510acc.js"><link rel="prefetch" href="/Home/assets/js/36.62b6e63f.js"><link rel="prefetch" href="/Home/assets/js/37.42dd3af6.js"><link rel="prefetch" href="/Home/assets/js/38.ce73a544.js"><link rel="prefetch" href="/Home/assets/js/39.f02bc307.js"><link rel="prefetch" href="/Home/assets/js/4.3e212fe4.js"><link rel="prefetch" href="/Home/assets/js/40.5e347b91.js"><link rel="prefetch" href="/Home/assets/js/41.c4785cba.js"><link rel="prefetch" href="/Home/assets/js/42.7b055896.js"><link rel="prefetch" href="/Home/assets/js/43.38197c33.js"><link rel="prefetch" href="/Home/assets/js/44.bad3d004.js"><link rel="prefetch" href="/Home/assets/js/45.e1f5c336.js"><link rel="prefetch" href="/Home/assets/js/46.e4dd4809.js"><link rel="prefetch" href="/Home/assets/js/47.44cdcf1f.js"><link rel="prefetch" href="/Home/assets/js/48.6b0bcf94.js"><link rel="prefetch" href="/Home/assets/js/49.f84d8c11.js"><link rel="prefetch" href="/Home/assets/js/5.c75cc4d2.js"><link rel="prefetch" href="/Home/assets/js/50.62bd8e57.js"><link rel="prefetch" href="/Home/assets/js/51.b9cec1fc.js"><link rel="prefetch" href="/Home/assets/js/52.fc7f7a1a.js"><link rel="prefetch" href="/Home/assets/js/53.b13a962e.js"><link rel="prefetch" href="/Home/assets/js/54.ec6286b0.js"><link rel="prefetch" href="/Home/assets/js/55.7996b340.js"><link rel="prefetch" href="/Home/assets/js/56.97d6f2d9.js"><link rel="prefetch" href="/Home/assets/js/57.0df64cb1.js"><link rel="prefetch" href="/Home/assets/js/58.c30a5bea.js"><link rel="prefetch" href="/Home/assets/js/59.7c9a8b47.js"><link rel="prefetch" href="/Home/assets/js/6.b1439560.js"><link rel="prefetch" href="/Home/assets/js/60.fc89a25b.js"><link rel="prefetch" href="/Home/assets/js/61.3c3dc19e.js"><link rel="prefetch" href="/Home/assets/js/62.2970193a.js"><link rel="prefetch" href="/Home/assets/js/63.95bb274b.js"><link rel="prefetch" href="/Home/assets/js/64.f0d5cf0c.js"><link rel="prefetch" href="/Home/assets/js/65.d6318947.js"><link rel="prefetch" href="/Home/assets/js/66.8eff8ba2.js"><link rel="prefetch" href="/Home/assets/js/67.cfc67837.js"><link rel="prefetch" href="/Home/assets/js/68.2fa4de54.js"><link rel="prefetch" href="/Home/assets/js/69.f6ca426c.js"><link rel="prefetch" href="/Home/assets/js/7.f227c584.js"><link rel="prefetch" href="/Home/assets/js/70.6d1e6835.js"><link rel="prefetch" href="/Home/assets/js/8.f8a0efca.js"><link rel="prefetch" href="/Home/assets/js/9.2c44c2a4.js">
    <link rel="stylesheet" href="/Home/assets/css/0.styles.e94f337b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Home/" class="home-link router-link-active"><img src="/Home/assets/logo.jpg" alt="海鹰斯坦的个人主页" class="logo"> <span class="site-name can-hide">海鹰斯坦的个人主页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Home/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Home/javascript/js/js001.html" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/Home/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/Home/vue/vue001.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/Home/react/react001.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Home/node/node001.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/Home/design-pattern/dm001.html" class="nav-link">
  设计模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Home/php/php001.html" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/Home/mysql/mysql001.html" class="nav-link">
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Home/computer-net/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/Home/operate-system/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/Home/data-structure/" class="nav-link">
  数据结构和算法
</a></li></ul></div></div><div class="nav-item"><a href="/Home/program/" class="nav-link">
  项目
</a></div><div class="nav-item"><a href="/Home/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/Home/leetcode/" class="nav-link">
  Leetcode
</a></div><div class="nav-item"><a href="/Home/tools/tools/tools001.html" class="nav-link">
  常用网站及工具
</a></div> <a href="https://github.com/yinhaiying/Home" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Home/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Home/javascript/js/js001.html" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/Home/typescript/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/Home/vue/vue001.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/Home/react/react001.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/Home/node/node001.html" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/Home/design-pattern/dm001.html" class="nav-link">
  设计模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Home/php/php001.html" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/Home/mysql/mysql001.html" class="nav-link">
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Home/computer-net/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/Home/operate-system/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/Home/data-structure/" class="nav-link">
  数据结构和算法
</a></li></ul></div></div><div class="nav-item"><a href="/Home/program/" class="nav-link">
  项目
</a></div><div class="nav-item"><a href="/Home/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/Home/leetcode/" class="nav-link">
  Leetcode
</a></div><div class="nav-item"><a href="/Home/tools/tools/tools001.html" class="nav-link">
  常用网站及工具
</a></div> <a href="https://github.com/yinhaiying/Home" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>原生JS基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>单元测试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>构建工具</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Home/javascript/webpack/webpack001.html" class="active sidebar-link">【001】从零开始搭建webpack</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><section id="nice" data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="font-size:16px;color:black;padding:0 10px;line-height:1.6;word-spacing:0px;letter-spacing:0px;word-break:break-word;word-wrap:break-word;text-align:left;font-family:Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;margin-top:-10px;"><h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;border-bottom:2px solid rgb(239, 112, 96);font-size:1.3em;"><span class="prefix" style="display:none;"></span><span class="content" style="display:inline-block;font-weight:bold;background:rgb(239, 112, 96);color:#ffffff;padding:3px 10px 1px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;">前言</span><span class="suffix"></span><span style="display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;"></span></h2> <blockquote data-tool="mdnice编辑器" style="display:block;font-size:0.9em;overflow:auto;overflow-scrolling:touch;border-left:3px solid rgba(0, 0, 0, 0.4);color:#6a737d;padding-top:10px;padding-bottom:10px;padding-left:20px;padding-right:10px;margin-bottom:20px;margin-top:20px;border-left-color:rgb(239, 112, 96);background:#fff9f9;"><p style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0px;color:black;line-height:26px;">到目前为止(2019年10月22日)，webpack5已经发布了，而个人对webpack的了解仍然停留在只会简单的配置，需要使用相关配置时，直接进行google，缺少对webpack的了解。为什么要这么配置？为什么要引入这个loader？这个loader是在所有项目中都需要引入吗？它解决了什么问题？对于这些问题，都没有深入的去了解。对于webpack的原理更是望而生畏，但是在前端开发过程中始终无法避开webpack，学好webpack也是前端进阶的必要技能，而学好一个东西最好的方法就是去实践。因此，本文会从零开始搭建一个webpack，在搭建的过程中，不仅会实现功能，更加重要的是明白为什么要这么做，每做一步的目的是什么，解决了哪些问题或者痛点，从而做到不仅知其然而且知其所以然。</p></blockquote> <h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;border-bottom:2px solid rgb(239, 112, 96);font-size:1.3em;"><span class="prefix" style="display:none;"></span><span class="content" style="display:inline-block;font-weight:bold;background:rgb(239, 112, 96);color:#ffffff;padding:3px 10px 1px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;">webpack的安装和简单配置</span><span class="suffix"></span><span style="display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;"></span></h2> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">安装</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">npm i webpack webpack-cli -D
<span></span></code></pre> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">配置webpack.config.js</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-keyword" style="color:#a626a4;line-height:26px;">const</span> path = <span class="hljs-built_in" style="color:#c18401;line-height:26px;">require</span>(<span class="hljs-string" style="color:#50a14f;line-height:26px;">'path'</span>);
<span></span><span class="hljs-built_in" style="color:#c18401;line-height:26px;">module</span>.exports = {
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">entry</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./src/index.js'</span>,
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">output</span>:{
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">path</span>:path.resolve(__dirname,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'dist'</span>),
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">filename</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'bundle.js'</span>
<span></span>    }
<span></span>}
<span></span></code></pre> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">webpack的执行</section></li></ul> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">我们安装完成webpack之后，如果直接在终端输入<em style="font-style:italic;color:black;">webpack</em>运行，会发现<strong style="font-weight:bold;color:black;">提示</strong>：“webpack不是内部或者外部命令，也不是可执行的程序或者批处理文件”。这说明简单直接使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack</code>不能实现打包。这是因为webpack的运行是依赖于<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">node_modules/.bin</code>目录下的可执行文件。想要运行<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">node_modules/.bin</code>下的可执行文件有两种方法：</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;"><strong style="font-weight:bold;color:black;">第一种方法</strong>是：通过在<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">package.json</code>的<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">scripts</code>字段下，添加命令。如下所示：</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">  <span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;scripts&quot;</span>: {
<span></span>    <span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;build&quot;</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;webpack&quot;</span>
<span></span>  },
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">这是因为，<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">package.json</code>下的<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">script</code>命令会自动去<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">node_modules/.bin</code>目录下查找可执行文件。这样的话就能够执行webpack了。</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;"><strong style="font-weight:bold;color:black;">第二种方法</strong>是：使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">npx webpack</code>执行命令。如下所示：</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">npx webpack
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;"><code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">npx webpack</code>命令也会自动帮助我们查找<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">node_modules/.bin</code>目录下的可执行文件，然后运行。</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">两种方法运行的过程如下图所示：</p> <figure data-tool="mdnice编辑器" style="margin:0;margin-top:10px;margin-bottom:10px;"><img src="https://i.loli.net/2019/10/22/Lw5vkhiYmI8s6C1.png" alt="webpack运行图.png" style="display:block;margin:0 auto;max-width:100%;"><figcaption style="margin-top:5px;text-align:center;color:#888;font-size:14px;">webpack运行图.png</figcaption></figure> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">到目前为止，我们实现了将<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">src/index.js</code>文件打包到<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">build/dist/bundle.js</code>，然后我们通过在<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">build/dist</code>目录下创建一个<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.html</code>文件，并且引入打包后的js，这样的话就可以在浏览器中进行查看了。当前的目录结构如下如所示：</p> <figure data-tool="mdnice编辑器" style="margin:0;margin-top:10px;margin-bottom:10px;"><img src="https://i.loli.net/2019/10/22/zUOAJKE1aLF4PyR.png" alt="目录结构.png" style="display:block;margin:0 auto;max-width:100%;"><figcaption style="margin-top:5px;text-align:center;color:#888;font-size:14px;">目录结构.png</figcaption></figure> <h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;border-bottom:2px solid rgb(239, 112, 96);font-size:1.3em;"><span class="prefix" style="display:none;"></span><span class="content" style="display:inline-block;font-weight:bold;background:rgb(239, 112, 96);color:#ffffff;padding:3px 10px 1px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;">打包css文件</span><span class="suffix"></span><span style="display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;"></span></h2> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">正如我们前面所说，webpack把每一个文件当做模块来处理，其中css文件也是被当做模块来处理的。但是css不同于js本身无法直接作为模块被加载，需要借助一些<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">loader</code>先打包成模块(<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">css-loader</code>)。然后再将css插入到head的style标签中(style-loader)。注意：必须先打包成模块，才能够被加载。</p> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">安装</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">npm i css-loader style-loader -D
<span></span></code></pre> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">配置</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-built_in" style="color:#c18401;line-height:26px;">module</span>:{
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">rules</span>:[
<span></span>        {
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">test</span>:<span class="hljs-regexp" style="color:#50a14f;line-height:26px;">/\.css$/</span>,
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">use</span>:[<span class="hljs-string" style="color:#50a14f;line-height:26px;">'style-loader'</span>,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'css-loader'</span>]
<span></span>        }
<span></span>    ]
<span></span>}
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">如上所示：所有的loader都配置在<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack.config.json</code>中的<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">module</code>中。</p> <h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;border-bottom:2px solid rgb(239, 112, 96);font-size:1.3em;"><span class="prefix" style="display:none;"></span><span class="content" style="display:inline-block;font-weight:bold;background:rgb(239, 112, 96);color:#ffffff;padding:3px 10px 1px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;">引入webpack-dev-server</span><span class="suffix"></span><span style="display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;"></span></h2> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">在开发的过程中，我们发现经常会使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack-dev-server</code>启动应用。但是为什么我们需要使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack-dev-server</code>?首先我们看一下之前是如何启动应用的：通过<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">dist/index.html</code>然后使用浏览器打开，得到的路径是本地路径。当我们使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack-dev-server</code>时，相当于开启了一个服务器，就可以使用类似于<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">http://localhost:8080/</code>这种地址来进行访问。而且，我们可以访问指定目录下的所有文件。</p> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">安装</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">npm i webpack-dev-server -D
<span></span></code></pre> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">webpack-dev-server常见配置</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">devServer:{
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">contentBase</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./dist'</span>, <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 指定开启服务器的目录。该目录下的所有文件可以通过http://xxx/yyy进行访文</span>
<span></span>    compress:<span class="hljs-literal" style="color:#0184bb;line-height:26px;">true</span>,<span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//进行压缩</span>
<span></span>    port:<span class="hljs-number" style="color:#986801;line-height:26px;">9999</span>, <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//端口号</span>
<span></span>    inline:<span class="hljs-literal" style="color:#0184bb;line-height:26px;">true</span>, <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//url模式</span>
<span></span>    hot:<span class="hljs-literal" style="color:#0184bb;line-height:26px;">true</span>,  <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//用于热更新 不需要舒心页面就能够实现内容的更新</span>
<span></span>    open:<span class="hljs-literal" style="color:#0184bb;line-height:26px;">true</span>  <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//默认打开浏览器</span>
<span></span>}
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;"><code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack-dev-server</code>的运行跟<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack</code>一样，同样依赖于<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">node_modules/.bin</code>目录下的可执行文件。因此同样有两种方法进行运行。</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">方法一：通过在scripts字段中添加命令</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">  <span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;scripts&quot;</span>: {
<span></span>    <span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;build&quot;</span>: <span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;webpack&quot;</span>,
<span></span>    <span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;dev&quot;</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;webpack-dev-server&quot;</span>
<span></span>  }
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">方法二：通过<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">npx webpack-dev-server</code>运行</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">npx webpack-dev-server
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">更多的配置信息参考：<a href="https://www.webpackjs.com/configuration/dev-server/" style="text-decoration:none;word-wrap:break-word;font-weight:bold;color:rgb(239, 112, 96);border-bottom:1px solid rgb(239, 112, 96);">webpack-dev-server</a></p> <h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;border-bottom:2px solid rgb(239, 112, 96);font-size:1.3em;"><span class="prefix" style="display:none;"></span><span class="content" style="display:inline-block;font-weight:bold;background:rgb(239, 112, 96);color:#ffffff;padding:3px 10px 1px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;">自动生成html模板</span><span class="suffix"></span><span style="display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;"></span></h2> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">为什么需要使用这个plugin了？到目前为止，我们打开运行项目，都是通过在<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">dist</code>目录下创建<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.html</code>然后将打包后的<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">bundle.js</code>进行引入。但是，这里有两个问题：</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">第一：有时候dist目录下打包文件过多，我们可能进行删除，如果不小心删除了<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.html</code>，那么就无法打开页面了。</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">第二：我们将<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">bundle.js</code>在<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.html</code>中进行引入，这里的打包后的文件名是固定死的，但是很多情况下我们的文件名是hash等值组成的。比如：</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-built_in" style="color:#c18401;line-height:26px;">module</span>.exports = {
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">entry</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./src/index.js'</span>,
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">output</span>:{
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">path</span>:path.resolve(__dirname,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'dist'</span>),
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">filename</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'[name].[hash:8].js'</span>
<span></span>    }
<span></span>}
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">这里的<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">[name]</code>是entry的名字，如果是单文件组件，那么默认名字是<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">main</code>，但是如果是多文件组件，则有对应的名字。这样的话，我们每次进行修改时，都会生成新的名字，也就是说我们每次都需要手动去修改<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.html</code>中的引用。这样的话无疑是非常麻烦的。</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">因此，基于以上两个问题，我们最好每次打包时能够自动生成一个<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">html</code>文件(解决第一个问题)，同时能够自动嵌入打包后的文件(解决第二个问题)。这时候就需要使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">html-webpack-plugin</code>插件了。</p> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">安装</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">npm i html-webpack-plugin -D
<span></span></code></pre> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">配置</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">    plugins:[
<span></span>        <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//自动生成html模板</span>
<span></span>        <span class="hljs-keyword" style="color:#a626a4;line-height:26px;">new</span> HtmlWebpackPlugin({
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">template</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./src/index.html'</span>,  <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 指定的html模板</span>
<span></span>            filename:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'index.html'</span>
<span></span>        })
<span></span>    ]
<span></span></code></pre> <h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;border-bottom:2px solid rgb(239, 112, 96);font-size:1.3em;"><span class="prefix" style="display:none;"></span><span class="content" style="display:inline-block;font-weight:bold;background:rgb(239, 112, 96);color:#ffffff;padding:3px 10px 1px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;">清理生成的dist/文件夹</span><span class="suffix"></span><span style="display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;"></span></h2> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">每次打包后都会默认生成一个<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.html</code>和打包后的js文件，这样的话dist目录下文件变得越来越多，最好能够在每次打包前直接删除之前的文件，使得<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">dist</code>目录下始终只有新生成的文件。这时候我们就需要用到<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">clean-webpack-plugin</code></p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 安装</span>
<span></span>npm i clean-webpack-plugin -D
<span></span><span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 使用</span>
<span></span><span class="hljs-keyword" style="color:#a626a4;line-height:26px;">new</span> CleanWebpackPlugin()
<span></span>
<span></span></code></pre> <h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;border-bottom:2px solid rgb(239, 112, 96);font-size:1.3em;"><span class="prefix" style="display:none;"></span><span class="content" style="display:inline-block;font-weight:bold;background:rgb(239, 112, 96);color:#ffffff;padding:3px 10px 1px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;">多入口文件</span><span class="suffix"></span><span style="display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;"></span></h2> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">如果我们希望实现多个入口进行打包，比如如下所示：</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;"><code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.html</code></p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">    <span class="hljs-tag" style="line-height:26px;">&lt;<span class="hljs-name" style="color:#e45649;line-height:26px;">div</span> <span class="hljs-attr" style="color:#986801;line-height:26px;">id</span>=<span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;base&quot;</span>&gt;</span><span class="hljs-tag" style="line-height:26px;">&lt;/<span class="hljs-name" style="color:#e45649;line-height:26px;">div</span>&gt;</span>
<span></span>    <span class="hljs-tag" style="line-height:26px;">&lt;<span class="hljs-name" style="color:#e45649;line-height:26px;">div</span> <span class="hljs-attr" style="color:#986801;line-height:26px;">id</span>=<span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;app&quot;</span>&gt;</span><span class="hljs-tag" style="line-height:26px;">&lt;/<span class="hljs-name" style="color:#e45649;line-height:26px;">div</span>&gt;</span>
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;"><code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack.config.js</code></p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">entry:{
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">index</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./src/index.js'</span>,
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">base</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./src/base.js'</span>
<span></span>},
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">多入口文件会先找到每个入口，然后从各个入口分别出发找到依赖的模块，然后生成一个Chunk(代码块)。最后会把Chunk写到文件系统中(Assets)。也就是说，多入口最后都会生成多个打包后的文件(每一个入口对应一个Chunk)。打包过程如下所示：</p> <figure data-tool="mdnice编辑器" style="margin:0;margin-top:10px;margin-bottom:10px;"><img src="https://i.loli.net/2019/10/24/9PNtSA4FkoJp3aO.png" alt="多入口文件生成asset.png" style="display:block;margin:0 auto;max-width:100%;"><figcaption style="margin-top:5px;text-align:center;color:#888;font-size:14px;">多入口文件生成asset.png</figcaption></figure> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">最后生成打包后的文件如下所示：</p> <figure data-tool="mdnice编辑器" style="margin:0;margin-top:10px;margin-bottom:10px;"><img src="https://i.loli.net/2019/10/22/7UdR6YxlEhv4PrT.png" alt="多入口打包.png" style="display:block;margin:0 auto;max-width:100%;"><figcaption style="margin-top:5px;text-align:center;color:#888;font-size:14px;">多入口打包.png</figcaption></figure> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">从上图中我们可以看出，每一个入口文件都生成了一个打包文件，而且这两个打包后的文件都被引入到<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.html</code>中了。但是实际上有时候我们是希望打包到不同的文件中，比如<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.js</code>打包到<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.html</code>中，</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;"><code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">base.js</code>打包到<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">base.html</code>中，这时候我们就又需要使用到<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">html-webpack-plugin</code>插件了。</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">        <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 一个entry对应一个代码块(chunk),生成一个assets。</span>
<span></span>  <span class="hljs-keyword" style="color:#a626a4;line-height:26px;">new</span> HtmlWebpackPlugin({
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">template</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./src/index.html'</span>,  <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 指定的html模板</span>
<span></span>            filename:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'index.html'</span>,
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">chunks</span>:[<span class="hljs-string" style="color:#50a14f;line-height:26px;">'index'</span>]
<span></span>        })
<span></span>        <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//</span>
<span></span>        <span class="hljs-keyword" style="color:#a626a4;line-height:26px;">new</span> HtmlWebpackPlugin({
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">template</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./src/base.html'</span>,  <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 指定的html模板</span>
<span></span>            filename:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'base.html'</span>,
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">chunks</span>:[<span class="hljs-string" style="color:#50a14f;line-height:26px;">'base'</span>],<span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//在产出的html文件中引入哪些代码块,通过entry名字进行设置</span>
<span></span>        }),
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">如上所示：我们使用了两次<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">html-webpack-plugin</code>，通过指定不同的模板，同时指定插入到模板中的文件(通过chunks设置)，这样就可以实现多文件入口打包到多文件中。</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">**chunks:**表示插入指定入口文件打包后的代码块，可以是多个入口得到后的代码块。</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;"><strong style="font-weight:bold;color:black;">多入口文件的应用</strong>：</p> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;"><p style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">可以用来抽离公共代码</p> <p style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">比如说我们有一些公共的库，比如<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">jquery</code>，<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">vue</code>等，这些库或者框架不应该在每个文件中都进行打包。而是抽离出来作为公共文件进行引入，这样可以压缩打包文件的大小。接下来，我们以在项目中引入<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">jquery</code>为例，我们将它作为一个入口分别打包到<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.html</code>和<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">base.html</code>中。</p></section></li></ul> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">需要进行的配置如下：</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">    entry:{
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">index</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./src/index.js'</span>,
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">base</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./src/base.js'</span>,
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">vendor</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'jquery'</span>
<span></span>    },
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">plugins</span>:[
<span></span>        <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//自动生成html模板</span>
<span></span>        <span class="hljs-keyword" style="color:#a626a4;line-height:26px;">new</span> HtmlWebpackPlugin({
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">template</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./src/index.html'</span>,
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">filename</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'index.html'</span>,
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">chunks</span>:[<span class="hljs-string" style="color:#50a14f;line-height:26px;">'vendor'</span>,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'index'</span>]  <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 这里需要把jquery打包后的asset注入index.html中</span>
<span></span>        }),
<span></span>        <span class="hljs-keyword" style="color:#a626a4;line-height:26px;">new</span> HtmlWebpackPlugin({
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">template</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./src/base.html'</span>,
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">filename</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'base.html'</span>,
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">chunks</span>:[<span class="hljs-string" style="color:#50a14f;line-height:26px;">'vendor'</span>,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'base'</span>],<span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 这里需要把jquery打包后的asset注入base.html中</span>
<span></span>        }),
<span></span>        <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 每次打包前清除dist目录下文件</span>
<span></span>        <span class="hljs-keyword" style="color:#a626a4;line-height:26px;">new</span> CleanWebpackPlugin()
<span></span>    ]
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">这样的话，就会打包成三个文件，公共模块<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">jquery</code>也会打包成一个文件。但是我们仍然不能直接在<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.js</code>等中使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">jquery</code>，因为每一个模块都是独立的，如果没有引入无法直接使用，但是我们又不想直接引入，webpack提供了一个插件<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack.ProvidePlugin</code>，可以自动向每个文件注入指定的变量。</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-keyword" style="color:#a626a4;line-height:26px;">new</span> webpack.ProvidePlugin({
<span></span> <span class="hljs-attr" style="color:#986801;line-height:26px;">$</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'jquery'</span>
<span></span>}),
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">这样的话，我们就可以直接在每个文件中使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">jquery</code>了。</p> <h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;border-bottom:2px solid rgb(239, 112, 96);font-size:1.3em;"><span class="prefix" style="display:none;"></span><span class="content" style="display:inline-block;font-weight:bold;background:rgb(239, 112, 96);color:#ffffff;padding:3px 10px 1px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;">打包图片</span><span class="suffix"></span><span style="display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;"></span></h2> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">在前端开发过程中，不可避免的需要用到图片，首先我们思考一下，我们经常使用图片的方式。是不是如下所示：</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">    &lt;<span class="hljs-selector-tag" style="color:#e45649;line-height:26px;">div</span> <span class="hljs-selector-tag" style="color:#e45649;line-height:26px;">id</span>=&quot;<span class="hljs-selector-tag" style="color:#e45649;line-height:26px;">app</span>&quot;&gt;
<span></span>        &lt;<span class="hljs-selector-tag" style="color:#e45649;line-height:26px;">img</span> <span class="hljs-selector-tag" style="color:#e45649;line-height:26px;">src</span>=&quot;../<span class="hljs-selector-tag" style="color:#e45649;line-height:26px;">assets</span>/<span class="hljs-selector-tag" style="color:#e45649;line-height:26px;">images</span>/1<span class="hljs-selector-class" style="color:#986801;line-height:26px;">.jpg</span>&quot; <span class="hljs-selector-tag" style="color:#e45649;line-height:26px;">alt</span>=&quot;&quot;&gt;
<span></span>    &lt;/<span class="hljs-selector-tag" style="color:#e45649;line-height:26px;">div</span>&gt;
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">我们通常都会直接在<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">img</code>标签中，写一个图片的相对地址，这样的话，本地打开肯定没有问题，但是如果我们使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack-dev-server</code>开启一个服务，就会发现有问题了,我们就会看大如下的报错：</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">http:<span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//localhost:8888/assets/images/1.jpg 404 (Not Found)</span>
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">事实上，使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack-dev-server</code>启动一个服务，就是把<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">dist</code>作为服务的根文件，我们可以使用连接直接访问这个目录下的任何文件，哪怕不是通过打包后生成的。但是，当前我们的dist目录下是没有assets文件的，它下面也没有图片，也就是说服务器找不到这个图片，因此返回404。事实上，服务器下面之所以找不到这个图片，是因为<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.html</code>这个文件没有经过打包，<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack</code>不会对这个模板文件进行打包，因此我们必须把图片放入到可以被打包的文件中，比如<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.js</code>或者<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">index.css</code>。这些文件都会经过打包，里面的图片也都会经过打包处理。</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;"><code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">file-loader</code>或者<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">url-loader</code>就是可以帮助我们处理图片打包:实际上就是把你使用你相对路径设置的图片，搬运到服务器下面。</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 安装</span>
<span></span>npm i file-laoder url-loader -D
<span></span><span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 简单配置</span>
<span></span>{
<span></span>    <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//解析图片地址，把图片从原来的位置打包到目标位置</span>
<span></span>    <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">//file-loader可以处理任意的二进制数据</span>
<span></span>    test:<span class="hljs-regexp" style="color:#50a14f;line-height:26px;">/\.(png|jpg|gif|svg|bmp)$/</span>,
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">loader</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'file-loader'</span>,
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">options</span>: {
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">name</span>: <span class="hljs-string" style="color:#50a14f;line-height:26px;">'[path][name].[ext]'</span>,
<span></span>    },
<span></span>}
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">刚刚我们说了，我们可以使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">css</code>和<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">js</code>两种方法来引用图片：</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">方法一：使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">css</code>，作为背景图片引入。</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-selector-id" style="color:#4078f2;line-height:26px;">#app</span> {
<span></span>    <span class="hljs-attribute" style="color:#50a14f;line-height:26px;">background</span>:<span class="hljs-built_in" style="color:#c18401;line-height:26px;">url</span>(<span class="hljs-string" style="color:#50a14f;line-height:26px;">'../assets/images/1.jpg'</span>);
<span></span>    <span class="hljs-attribute" style="color:#50a14f;line-height:26px;">width</span>:<span class="hljs-number" style="color:#986801;line-height:26px;">100px</span>;
<span></span>    <span class="hljs-attribute" style="color:#50a14f;line-height:26px;">height</span>:<span class="hljs-number" style="color:#986801;line-height:26px;">100px</span>;
<span></span>}
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">我们查看打包后的文件:</p> <figure data-tool="mdnice编辑器" style="margin:0;margin-top:10px;margin-bottom:10px;"><img src="https://i.loli.net/2019/10/25/l4gcweVxKP7u6qf.png" alt="图片打包.png" style="display:block;margin:0 auto;max-width:100%;"><figcaption style="margin-top:5px;text-align:center;color:#888;font-size:14px;">图片打包.png</figcaption></figure> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">我们可以发现，文件中多出来了一个<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">assets</code>目录，下面是我们引入的图片。也就是说<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">file-loader</code>帮助我们把图片从原来的位置，搬运到了服务器<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">dist</code>目录下，这样的话我们就可以在启动服务后访问到了。</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">方法二：通过<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">js</code>引入图片。</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-keyword" style="color:#a626a4;line-height:26px;">import</span> src <span class="hljs-keyword" style="color:#a626a4;line-height:26px;">from</span> <span class="hljs-string" style="color:#50a14f;line-height:26px;">'../assets/images/1.jpg'</span>;
<span></span><span class="hljs-keyword" style="color:#a626a4;line-height:26px;">let</span> image = <span class="hljs-keyword" style="color:#a626a4;line-height:26px;">new</span> Image();
<span></span>image.src = src;
<span></span><span class="hljs-built_in" style="color:#c18401;line-height:26px;">document</span>.appendChild(image);
<span></span></code></pre> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content">引入less和scss</span><span class="suffix" style="display:none;"></span></h4> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;"><code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">Scss</code>和<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">less</code>是动态样式语言，比<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">css</code>多出许多功能(如变量、嵌套、运算,混入(Mixin)、继承、颜色处理，函数等)，更容易阅读。因此，在项目开发过程中，通常会引入scss和less来简化样式的处理。但是，对于浏览器是不识别less和scss语法的，也就是说我们实际上还是需要将<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">.scss</code>或者<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">.less</code>文件转化成<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">css</code>。因此，我们需要特定的<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">loader</code>来帮助我们处理。</p> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">安装</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">npm i less less-loader node-sass sass-loader
<span></span></code></pre> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">简单配置</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">    {
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">test</span>:<span class="hljs-regexp" style="color:#50a14f;line-height:26px;">/\.less$/</span>,
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">loader</span>:[<span class="hljs-string" style="color:#50a14f;line-height:26px;">'style-loader'</span>,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'css-loader'</span>,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'less-loader'</span>]
<span></span>
<span></span>    },
<span></span>    {
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">test</span>:<span class="hljs-regexp" style="color:#50a14f;line-height:26px;">/\.s[ac]ss$/i</span>,
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">loader</span>:[<span class="hljs-string" style="color:#50a14f;line-height:26px;">'style-loader'</span>,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'css-loader'</span>,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'sass-loader'</span>]
<span></span>    },
<span></span></code></pre> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">引用</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-built_in" style="color:#c18401;line-height:26px;">require</span>(<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./index.less'</span>);
<span></span><span class="hljs-built_in" style="color:#c18401;line-height:26px;">require</span>(<span class="hljs-string" style="color:#50a14f;line-height:26px;">'./index.scss'</span>);
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">我们可以看到，在配置<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">less</code>和<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">scss</code>的loader时，我们不仅需要使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">less-loader</code>而且还需要使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">css-loader</code>和<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">style-loader</code>，而且还有确定的顺序。这是因为每一种loader实现不同的功能，其中<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">less-loader</code>用于将<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">less</code>文件转化成<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">css</code>文件；<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">css-loader</code>用于将css文件转化成模块，<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">style-loader</code>用于将打包后的样式插入到head中的style标签中。这样下来，整个样式才能够生效。</p> <h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;border-bottom:2px solid rgb(239, 112, 96);font-size:1.3em;"><span class="prefix" style="display:none;"></span><span class="content" style="display:inline-block;font-weight:bold;background:rgb(239, 112, 96);color:#ffffff;padding:3px 10px 1px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;">抽离公共的css代码</span><span class="suffix"></span><span style="display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;"></span></h2> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">到目前为止，我们已经实现了对<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">css</code>、<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">less</code>和<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">scss</code>的处理，通过合适的loader能够把样式通过style标签嵌入到html中，但是有时候我们不希望把所有样式都在html中引用。比如我们使用了一些非常大的UI框架，比如bootstrap，element-ui等UI框架。如果把这些都打包到head中，会导致整个html体积非常大，使得整个页面加载变慢。因此，我们会考虑将这些比较大的样式文件抽离出来，这样的话一方面可以减少html的体积，减少首次加载的时间，另一方面如果页面较多可以使用缓存，避免二次加载。在webpack4版本中，提供了专门提供了<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">mini-css-extract-plugin</code>插件用来实现对<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">css</code>代码的抽离。</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 安装</span>
<span></span>npm i mini-css-extract-plugin -D
<span></span><span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 配置</span>
<span></span>    {
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">test</span>:<span class="hljs-regexp" style="color:#50a14f;line-height:26px;">/\.css$/</span>,
<span></span>            <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// use:['style-loader','css-loader']  这里是原来的cssloader的配置</span>
<span></span>            use:[
<span></span>                {
<span></span>                    <span class="hljs-attr" style="color:#986801;line-height:26px;">loader</span>:MiniCssExtractPlugin.loader,
<span></span>                    <span class="hljs-attr" style="color:#986801;line-height:26px;">options</span>:{
<span></span>                        <span class="hljs-attr" style="color:#986801;line-height:26px;">publicPath</span>: <span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;../&quot;</span>
<span></span>                    }
<span></span>                },
<span></span>                <span class="hljs-string" style="color:#50a14f;line-height:26px;">'css-loader'</span>
<span></span>            ]
<span></span>    }
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">从上面的配置代码中，我们可以看出原来的style-loader被MiniCssExtractPlugin.loader取代了。这是因为style-loader的功能是向html的head中插入style标签。而实际上我们并不希望通过style标签来引入样式，而是通过抽离css代码使用link来进行引入，因此需要将style-loader给替换掉。</p> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">相对应的plugin配置如下：</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">    <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 抽离css文件</span>
<span></span>    <span class="hljs-keyword" style="color:#a626a4;line-height:26px;">new</span> MiniCssExtractPlugin({
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">filename</span>:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'[name].css'</span>,  <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 抽离后的文件名</span>
<span></span>        chunkFilename:<span class="hljs-string" style="color:#50a14f;line-height:26px;">'[name].css'</span>,
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">ignoreOrder</span>:<span class="hljs-literal" style="color:#0184bb;line-height:26px;">false</span>
<span></span>    })
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">最终实现的效果如下：</p> <figure data-tool="mdnice编辑器" style="margin:0;margin-top:10px;margin-bottom:10px;"><img src="https://i.loli.net/2019/10/28/T25EGI1A3g8S6fr.png" alt="mini-css-extract.png" style="display:block;margin:0 auto;max-width:100%;"><figcaption style="margin-top:5px;text-align:center;color:#888;font-size:14px;">mini-css-extract.png</figcaption></figure> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">同理，我们可以用来实现对scss和less文件的抽离，配置时只需要替换掉style-loader即可。</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">    {
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">test</span>:<span class="hljs-regexp" style="color:#50a14f;line-height:26px;">/\.s[ac]ss$/i</span>,
<span></span>            <span class="hljs-attr" style="color:#986801;line-height:26px;">use</span>:[
<span></span>                <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 'style-loader',使用MiniCssExtractPlugin.loader替换掉style-loader</span>
<span></span>                {
<span></span>                    <span class="hljs-attr" style="color:#986801;line-height:26px;">loader</span>:MiniCssExtractPlugin.loader
<span></span>
<span></span>                },
<span></span>                <span class="hljs-string" style="color:#50a14f;line-height:26px;">'css-loader'</span>,
<span></span>                <span class="hljs-string" style="color:#50a14f;line-height:26px;">'sass-loader'</span>
<span></span>            ]
<span></span>    },
<span></span></code></pre> <h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;border-bottom:2px solid rgb(239, 112, 96);font-size:1.3em;"><span class="prefix" style="display:none;"></span><span class="content" style="display:inline-block;font-weight:bold;background:rgb(239, 112, 96);color:#ffffff;padding:3px 10px 1px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;">自动添加浏览器前缀</span><span class="suffix"></span><span style="display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;"></span></h2> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">在很多情况下，我们为了处理兼容性问题，通常需要加一些浏览器的前缀，这些前缀不容易记住，而且写起来比较麻烦。因此，我们希望实现自动添加浏览器前缀。</p> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">安装</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">npm i postcss-loader autoprefixer -D
<span></span></code></pre> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">loader的配置</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">            {
<span></span>                <span class="hljs-attr" style="color:#986801;line-height:26px;">test</span>:<span class="hljs-regexp" style="color:#50a14f;line-height:26px;">/\.css$/</span>,
<span></span>                <span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// use:['style-loader','css-loader']</span>
<span></span>                use:[
<span></span>                    {
<span></span>                        <span class="hljs-attr" style="color:#986801;line-height:26px;">loader</span>:MiniCssExtractPlugin.loader,
<span></span>                        <span class="hljs-attr" style="color:#986801;line-height:26px;">options</span>:{
<span></span>                            <span class="hljs-attr" style="color:#986801;line-height:26px;">publicPath</span>: <span class="hljs-string" style="color:#50a14f;line-height:26px;">&quot;../&quot;</span>
<span></span>                        }
<span></span>                    },
<span></span>                    <span class="hljs-string" style="color:#50a14f;line-height:26px;">'css-loader'</span>,
<span></span>                    <span class="hljs-string" style="color:#50a14f;line-height:26px;">'postcss-loader'</span>
<span></span>                ]
<span></span>            },
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">除了需要在<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webpack.config.js</code>中配置loader，我们还需要配置一个postcss.config.js文件，这里只写了简单的配置，更多的配置可以查看<a href="https://webpack.js.org/loaders/postcss-loader/" style="text-decoration:none;word-wrap:break-word;font-weight:bold;color:rgb(239, 112, 96);border-bottom:1px solid rgb(239, 112, 96);">postcss-loader</a>。</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-built_in" style="color:#c18401;line-height:26px;">module</span>.exports = {
<span></span>    <span class="hljs-attr" style="color:#986801;line-height:26px;">plugins</span>:[<span class="hljs-built_in" style="color:#c18401;line-height:26px;">require</span>(<span class="hljs-string" style="color:#50a14f;line-height:26px;">'autoprefixer'</span>)]
<span></span>}
<span></span></code></pre> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">打包后就会实现自动添加<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">webkit</code>等浏览器前缀。</p> <h4 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;font-size:18px;"><span class="prefix" style="display:none;"></span><span class="content">使用babel处理js文件</span><span class="suffix" style="display:none;"></span></h4> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">随着ES6，ES7的发布，在项目开发过程中，使用到新的ES6和ES7越来越多。因此，我们需要使用babel来处理这些。</p> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">安装</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:-webkit-box;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">npm install -D babel-loader @babel/core @babel/preset-env
</code></pre> <ul data-tool="mdnice编辑器" style="margin-top:8px;margin-bottom:8px;padding-left:25px;color:black;list-style-type:disc;"><li><section style="margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;color:rgb(1,1,1);font-weight:500;">配置</section></li></ul> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;">    {
<span></span>      <span class="hljs-attr" style="color:#986801;line-height:26px;">test</span>: <span class="hljs-regexp" style="color:#50a14f;line-height:26px;">/\.m?js$/</span>,
<span></span>      <span class="hljs-attr" style="color:#986801;line-height:26px;">exclude</span>: <span class="hljs-regexp" style="color:#50a14f;line-height:26px;">/(node_modules|bower_components)/</span>,
<span></span>      <span class="hljs-attr" style="color:#986801;line-height:26px;">use</span>: {
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">loader</span>: <span class="hljs-string" style="color:#50a14f;line-height:26px;">'babel-loader'</span>,
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">options</span>: {
<span></span>          <span class="hljs-attr" style="color:#986801;line-height:26px;">presets</span>: [<span class="hljs-string" style="color:#50a14f;line-height:26px;">'@babel/preset-env'</span>]
<span></span>        }
<span></span>      }
<span></span>    }
<span></span></code></pre> <h2 data-tool="mdnice编辑器" style="margin-top:30px;margin-bottom:15px;padding:0px;font-weight:bold;color:black;border-bottom:2px solid rgb(239, 112, 96);font-size:1.3em;"><span class="prefix" style="display:none;"></span><span class="content" style="display:inline-block;font-weight:bold;background:rgb(239, 112, 96);color:#ffffff;padding:3px 10px 1px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px;">复制文件或者文件夹到指定目录</span><span class="suffix"></span><span style="display:inline-block;vertical-align:bottom;border-bottom:36px solid #efebe9;border-right:20px solid transparent;"></span></h2> <p data-tool="mdnice编辑器" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;">有些时候，我们并不需要所有的文件都进行打包，只是需要经文件从一个目录下复制到另一个目录比如dist目录下。这时候，我们可以使用<code style="font-size:14px;word-wrap:break-word;padding:2px 4px;border-radius:4px;margin:0 2px;background-color:rgba(27,31,35,.05);font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;word-break:break-all;color:rgb(239, 112, 96);">copy-webpack-plugin</code>。</p> <pre data-tool="mdnice编辑器" class="custom" style="margin-top:10px;margin-bottom:10px;"><code class="hljs" style="overflow-x:auto;padding:16px;color:#383a42;background:#fafafa;display:block;font-family:Operator Mono, Consolas, Monaco, Menlo, monospace;border-radius:0px;font-size:12px;-webkit-overflow-scrolling:touch;"><span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 安装</span>
<span></span>npm i copy-webpack-plugin -D
<span></span><span class="hljs-comment" style="color:#a0a1a7;font-style:italic;line-height:26px;">// 配置</span>
<span></span><span class="hljs-keyword" style="color:#a626a4;line-height:26px;">new</span> CopyPlugin([
<span></span>    {
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">from</span>:path.join(__dirname,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'src/common'</span>),
<span></span>        <span class="hljs-attr" style="color:#986801;line-height:26px;">to</span>:path.join(__dirname,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'dist'</span>,<span class="hljs-string" style="color:#50a14f;line-height:26px;">'common'</span>)
<span></span>    }
<span></span>])
<span></span></code></pre> <p id="nice-suffix-juejin-container" data-tool="mdnice编辑器" class="nice-suffix-juejin-container" style="font-size:16px;padding-top:8px;padding-bottom:8px;margin:0;line-height:26px;color:black;margin-top:20px !important;">本文使用 <a href="https://mdnice.com" style="text-decoration:none;word-wrap:break-word;font-weight:bold;color:rgb(239, 112, 96);border-bottom:1px solid rgb(239, 112, 96);">mdnice</a> 排版</p></section></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Home/javascript/test/test003.html" class="prev">
        【003】前端单元测试框架
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Home/assets/js/app.4e9de29e.js" defer></script><script src="/Home/assets/js/2.852f0768.js" defer></script><script src="/Home/assets/js/34.76e04935.js" defer></script>
  </body>
</html>
